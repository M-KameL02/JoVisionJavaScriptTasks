<!DOCTYPE html>
<html>
<head>
    <title>Get Age by Name</title>
</head>
<body>
    <script>
        async function save_info(event) {
            event.preventDefault(); 
            const name = document.getElementById("name").value.trim();
            if (!name) {
                alert("Please enter a name.");
                return;
            }

            try {
                console.log("Fetching data for:", name);
                const response = await fetch(`https://api.agify.io?name=${name}`);
                
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                
                const data = await response.json(); 
                console.log("Data received:", data);
                
                const popupWindow = window.open("", "popupWindow", "width=300,height=200");
                popupWindow.document.write(`
                    <html>
                    <head><title>Info</title></head>
                    <body>
                        <p>Your name is: ${name}</p>
                        <p>Your estimated age is: ${data.age}</p>
                    </body>
                    </html>
                `);
            } catch (error) {
                console.error('There has been a problem with your fetch operation:', error);
                alert('Failed to fetch data. Check the console for details.');
            }
        }
    </script>
    <form id="myForm" onsubmit="save_info(event)">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" title="Name" placeholder="Name"><br><br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>
